---
import BaseLayout from '../layouts/BaseLayout.astro';
import MermaidDiagram from '../components/MermaidDiagram.astro';

const diagram = `
graph TB
    %% Nodes
    U[ğŸ‘¤ Usuario]
    UI[ğŸ’¬ Interfaz de Chat<br/>UI Conversacional]
    AUTH[ğŸ” AutenticaciÃ³n y AutorizaciÃ³n<br/>GestiÃ³n de Identidad]
    API[âš™ï¸ Servicios de AplicaciÃ³n<br/>LÃ³gica de Negocio y OrquestaciÃ³n]

    subgraph "Capa de AI"
        LLM[ğŸ¤– Modelo de Lenguaje Grande<br/>Procesamiento de Lenguaje Natural]
        ML[ğŸ¯ Modelo de PredicciÃ³n<br/>Machine Learning y AnÃ¡lisis]
    end

    AUTO[ğŸ”„ AutomatizaciÃ³n de Flujo<br/>OrquestaciÃ³n de Procesos]
    MCP[ğŸ”Œ Protocolo de IntegraciÃ³n<br/>Datos Â· Sistemas Â· Documentos]
    DOCS[ğŸ“š Repositorio de Documentos<br/>GestiÃ³n de Contenido]
    DB[(ğŸ—„ï¸ AlmacÃ©n de Datos<br/>Estructurado y No Estructurado)]
    SYSTEMS[ğŸ’¼ Sistemas Empresariales<br/>Aplicaciones de Negocio]
    OBS[ğŸ“Š Monitoreo y AnÃ¡lisis<br/>Insights de Rendimiento y Uso]

    %% User interactions
    U -->|InteractÃºa| UI
    UI -->|Autentica| AUTH
    UI -->|Solicita| API

    %% Application flow
    API -->|Valida| AUTH
    API -->|Consulta| DOCS
    API -->|Procesa con| LLM
    API -->|Predice con| ML
    API -->|Activa| AUTO

    %% Automation flow
    AUTO -->|Usa| LLM
    AUTO -->|Invoca| MCP
    AUTO -->|Notifica| API

    %% AI integration
    LLM -->|Extiende vÃ­a| MCP
    ML -->|Accede datos vÃ­a| MCP

    %% Data access
    MCP -->|Accede| DB
    MCP -->|Integra| SYSTEMS
    MCP -->|Recupera| DOCS

    %% Observability
    API -.->|MÃ©tricas| OBS
    LLM -.->|Datos de Uso| OBS
    ML -.->|Predicciones y Rendimiento| OBS
    AUTO -.->|Logs de EjecuciÃ³n| OBS
    MCP -.->|Eventos de Herramientas| OBS

    %% Response flow
    UI -.->|Entrega Resultados| U

    %% Styling
    style U fill:#e1f5ff
    style UI fill:#fff4e1
    style AUTH fill:#ffe1f0
    style API fill:#ffd6e8
    style LLM fill:#f0e1ff
    style ML fill:#f0e1ff
    style AUTO fill:#e8d4ff
    style MCP fill:#e1ffe1
    style DOCS fill:#ffe8b3
    style DB fill:#ffe1e1
    style SYSTEMS fill:#ffe1e1
    style OBS fill:#d4f1f4
`;
---

<BaseLayout title="Plataforma Conceptual de AI" lang="es" showControls={true}>
    <Fragment slot="controls">
        <button class="control-btn" onclick="resetZoom()">Restablecer Zoom</button>
    </Fragment>

    <h1>ğŸ¨ Plataforma Conceptual de AI</h1>
    <MermaidDiagram
        diagram={diagram}
        loadingText="Cargando diagrama..."
        hintText="ğŸ’¡ Usa la rueda del ratÃ³n para hacer zoom, arrastra para desplazar"
    />
</BaseLayout>
