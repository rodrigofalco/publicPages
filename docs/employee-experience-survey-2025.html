<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Experience Survey 2025 - Patagonian</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #15294b 0%, #046cfc 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(90deg, #15294b 0%, #046cfc 100%);
            padding: 30px;
            color: white;
            position: relative;
        }

        .logo-container {
            margin-bottom: 20px;
        }

        .logo-container img {
            max-width: 200px;
            height: auto;
        }

        .language-selector {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .language-selector a {
            color: white;
            text-decoration: none;
            margin: 0 5px;
            font-weight: 600;
        }

        .language-selector a:hover {
            color: #f1870d;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        h2 {
            font-family: 'Montserrat', sans-serif;
            color: #15294b;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #f1870d;
            padding-bottom: 10px;
        }

        h3 {
            font-family: 'Montserrat', sans-serif;
            color: #046cfc;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }

        p {
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .chart-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2em;
            color: #15294b;
            margin-bottom: 20px;
            text-align: center;
        }

        .metric-card {
            background: linear-gradient(135deg, #046cfc 0%, #15294b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .metric-value {
            font-size: 3em;
            font-weight: bold;
            font-family: 'Montserrat', sans-serif;
        }

        .metric-label {
            font-size: 1.1em;
            margin-top: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            border: 2px solid #046cfc;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #046cfc;
            font-family: 'Montserrat', sans-serif;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .recommendations {
            background: #fff8f0;
            border-left: 4px solid #f1870d;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .recommendations ul {
            margin-left: 20px;
            margin-top: 15px;
        }

        .recommendations li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        svg {
            overflow: visible;
        }

        .bar {
            transition: opacity 0.3s;
        }

        .bar:hover {
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .language-selector {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 15px;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <a href="https://patagonian.com" target="_blank">
                    <img src="patagonian_logo_RGB_color-300x58.png" alt="Patagonian Logo">
                </a>
            </div>
            <div class="language-selector">
                <a href="employee-experience-survey-2025.html" class="active">EN</a> |
                <a href="encuesta-experiencia-empleados-2025.html">ES</a>
            </div>
            <h1>Employee Experience Survey 2025</h1>
            <p class="subtitle">Comprehensive Analysis and Key Insights</p>
        </header>

        <div class="content">
            <!-- Executive Summary -->
            <div class="section">
                <h2>Executive Summary</h2>
                <p>The 2025 Employee Experience Survey at Patagonian collected feedback across all business units and roles, focusing on leadership, belonging, inclusion, career growth, recognition, communication, well-being, remote work, and engagement.</p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">110+</div>
                        <div class="stat-label">Total Responses</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Countries</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">9</div>
                        <div class="stat-label">Key Pillars</div>
                    </div>
                </div>
            </div>

            <!-- ENPS Section -->
            <div class="section">
                <h2>Employee Net Promoter Score (ENPS)</h2>

                <div class="metric-card">
                    <div class="metric-value">22%</div>
                    <div class="metric-label">ENPS Score: Positive, with room for improvement</div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">ENPS Distribution</div>
                    <div id="enps-chart"></div>
                </div>
            </div>

            <!-- Engagement Metrics -->
            <div class="section">
                <h2>Engagement Metrics</h2>

                <div class="chart-container">
                    <div class="chart-title">Key Engagement Indicators</div>
                    <div id="engagement-chart"></div>
                </div>
            </div>

            <!-- Pillar Analysis -->
            <div class="section">
                <h2>Pillar Analysis</h2>
                <p>Comprehensive breakdown of satisfaction across key organizational pillars:</p>

                <div class="chart-container">
                    <div class="chart-title">Pillar Performance Scores</div>
                    <div id="pillar-chart"></div>
                </div>
            </div>

            <!-- Detailed Findings -->
            <div class="section">
                <h2>Key Findings by Pillar</h2>

                <h3>Leadership</h3>
                <div class="chart-container">
                    <div class="chart-title">Leadership Metrics</div>
                    <div id="leadership-chart"></div>
                </div>

                <h3>Belonging & Inclusion</h3>
                <div class="chart-container">
                    <div class="chart-title">Belonging & Inclusion Metrics</div>
                    <div id="belonging-chart"></div>
                </div>

                <h3>Career Growth & Development</h3>
                <div class="chart-container">
                    <div class="chart-title">Career Development Metrics</div>
                    <div id="career-chart"></div>
                </div>

                <h3>Rewards & Recognition</h3>
                <div class="chart-container">
                    <div class="chart-title">Recognition & Compensation Metrics</div>
                    <div id="rewards-chart"></div>
                </div>
            </div>

            <!-- Strengths & Challenges -->
            <div class="section">
                <h2>Strengths & Challenges</h2>

                <div class="chart-container">
                    <div class="chart-title">Top Strengths vs. Key Challenges</div>
                    <div id="comparison-chart"></div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="section">
                <h2>Recommendations</h2>

                <div class="recommendations">
                    <h3>1. Enhance Leadership Communication</h3>
                    <ul>
                        <li>Increase transparency about company strategy, values, and changes</li>
                        <li>Hold regular Q&A sessions and publish leadership updates</li>
                    </ul>
                </div>

                <div class="recommendations">
                    <h3>2. Strengthen Company Culture</h3>
                    <ul>
                        <li>Invest in cross-team integration activities (virtual and in-person)</li>
                        <li>Revisit and reinforce core values in daily operations</li>
                    </ul>
                </div>

                <div class="recommendations">
                    <h3>3. Review Compensation & Benefits</h3>
                    <ul>
                        <li>Benchmark compensation against industry standards</li>
                        <li>Communicate clearly about compensation philosophy and review cycles</li>
                    </ul>
                </div>

                <div class="recommendations">
                    <h3>4. Expand Career Development</h3>
                    <ul>
                        <li>Offer more structured feedback and mentorship programs</li>
                        <li>Increase access to learning resources and internal mobility</li>
                    </ul>
                </div>

                <div class="recommendations">
                    <h3>5. Recognition & Well-being</h3>
                    <ul>
                        <li>Standardize recognition programs across teams</li>
                        <li>Continue supporting well-being initiatives and flexible work arrangements</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tooltip
        const tooltip = d3.select('body').append('div')
            .attr('class', 'tooltip');

        // Color palette
        const colors = {
            primary: '#046cfc',
            dark: '#15294b',
            accent: '#f1870d',
            positive: '#28a745',
            warning: '#ffc107',
            danger: '#dc3545'
        };

        // ENPS Chart
        function createENPSChart() {
            const data = [
                { category: 'Promoters', value: 43, color: colors.positive },
                { category: 'Passives', value: 36, color: colors.warning },
                { category: 'Detractors', value: 21, color: colors.danger }
            ];

            const width = 600;
            const height = 400;
            const margin = { top: 20, right: 20, bottom: 60, left: 60 };

            const svg = d3.select('#enps-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.category))
                .range([0, chartWidth])
                .padding(0.3);

            const y = d3.scaleLinear()
                .domain([0, 50])
                .range([chartHeight, 0]);

            g.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', d => x(d.category))
                .attr('y', d => y(d.value))
                .attr('width', x.bandwidth())
                .attr('height', d => chartHeight - y(d.value))
                .attr('fill', d => d.color)
                .attr('rx', 5)
                .on('mouseover', function(event, d) {
                    tooltip.style('opacity', 1)
                        .html(`<strong>${d.category}</strong><br/>${d.value}%`);
                })
                .on('mousemove', function(event) {
                    tooltip.style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });

            // Add value labels on bars
            g.selectAll('.label')
                .data(data)
                .enter()
                .append('text')
                .attr('class', 'label')
                .attr('x', d => x(d.category) + x.bandwidth() / 2)
                .attr('y', d => y(d.value) - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '18px')
                .attr('font-weight', 'bold')
                .attr('fill', d => d.color)
                .text(d => d.value + '%');

            // X axis
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('font-size', '12px');

            // Y axis
            g.append('g')
                .call(d3.axisLeft(y).tickFormat(d => d + '%'))
                .selectAll('text')
                .attr('font-size', '12px');
        }

        // Engagement Chart
        function createEngagementChart() {
            const data = [
                { metric: 'Feel Motivated', value: 75 },
                { metric: 'Proud to Work Here', value: 82 }
            ];

            const width = 600;
            const height = 300;
            const margin = { top: 20, right: 20, bottom: 60, left: 150 };

            const svg = d3.select('#engagement-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleLinear()
                .domain([0, 100])
                .range([0, chartWidth]);

            const y = d3.scaleBand()
                .domain(data.map(d => d.metric))
                .range([0, chartHeight])
                .padding(0.3);

            g.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', 0)
                .attr('y', d => y(d.metric))
                .attr('width', d => x(d.value))
                .attr('height', y.bandwidth())
                .attr('fill', colors.primary)
                .attr('rx', 5)
                .on('mouseover', function(event, d) {
                    tooltip.style('opacity', 1)
                        .html(`<strong>${d.metric}</strong><br/>${d.value}%`);
                })
                .on('mousemove', function(event) {
                    tooltip.style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });

            // Add value labels
            g.selectAll('.label')
                .data(data)
                .enter()
                .append('text')
                .attr('x', d => x(d.value) + 10)
                .attr('y', d => y(d.metric) + y.bandwidth() / 2)
                .attr('dy', '0.35em')
                .attr('font-size', '16px')
                .attr('font-weight', 'bold')
                .attr('fill', colors.dark)
                .text(d => d.value + '%');

            // Y axis
            g.append('g')
                .call(d3.axisLeft(y))
                .selectAll('text')
                .attr('font-size', '12px');

            // X axis
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(x).tickFormat(d => d + '%'))
                .selectAll('text')
                .attr('font-size', '12px');
        }

        // Pillar Chart
        function createPillarChart() {
            const data = [
                { pillar: 'Belonging & Inclusion', score: 87 },
                { pillar: 'Remote Work', score: 88 },
                { pillar: 'Career Growth', score: 77 },
                { pillar: 'Recognition', score: 77 },
                { pillar: 'Well-being', score: 79 },
                { pillar: 'Leadership', score: 66 },
                { pillar: 'Communication', score: 78 },
                { pillar: 'Fair Compensation', score: 48 }
            ].sort((a, b) => b.score - a.score);

            const width = 800;
            const height = 500;
            const margin = { top: 20, right: 20, bottom: 100, left: 60 };

            const svg = d3.select('#pillar-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.pillar))
                .range([0, chartWidth])
                .padding(0.2);

            const y = d3.scaleLinear()
                .domain([0, 100])
                .range([chartHeight, 0]);

            const colorScale = d3.scaleLinear()
                .domain([0, 50, 100])
                .range([colors.danger, colors.warning, colors.positive]);

            g.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', d => x(d.pillar))
                .attr('y', d => y(d.score))
                .attr('width', x.bandwidth())
                .attr('height', d => chartHeight - y(d.score))
                .attr('fill', d => colorScale(d.score))
                .attr('rx', 5)
                .on('mouseover', function(event, d) {
                    tooltip.style('opacity', 1)
                        .html(`<strong>${d.pillar}</strong><br/>Score: ${d.score}%`);
                })
                .on('mousemove', function(event) {
                    tooltip.style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });

            // Add value labels
            g.selectAll('.label')
                .data(data)
                .enter()
                .append('text')
                .attr('x', d => x(d.pillar) + x.bandwidth() / 2)
                .attr('y', d => y(d.score) - 5)
                .attr('text-anchor', 'middle')
                .attr('font-size', '14px')
                .attr('font-weight', 'bold')
                .attr('fill', colors.dark)
                .text(d => d.score + '%');

            // X axis
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end')
                .attr('dx', '-0.8em')
                .attr('dy', '0.15em')
                .attr('font-size', '11px');

            // Y axis
            g.append('g')
                .call(d3.axisLeft(y).tickFormat(d => d + '%'))
                .selectAll('text')
                .attr('font-size', '12px');
        }

        // Leadership Chart
        function createLeadershipChart() {
            const data = [
                { metric: 'Trust in Leadership', value: 65 },
                { metric: 'Clarity of Vision', value: 64 },
                { metric: 'Consistency with Values', value: 68 }
            ];

            createHorizontalBarChart(data, '#leadership-chart', 400);
        }

        // Belonging Chart
        function createBelongingChart() {
            const data = [
                { metric: 'Team Belonging', value: 93 },
                { metric: 'Impactful Work', value: 87 },
                { metric: 'Innovation Welcomed', value: 85 },
                { metric: 'Express Opinions', value: 84 },
                { metric: 'Diversity Valued', value: 84 }
            ];

            createHorizontalBarChart(data, '#belonging-chart', 450);
        }

        // Career Chart
        function createCareerChart() {
            const data = [
                { metric: 'Role Clarity', value: 87 },
                { metric: 'Learning Opportunities', value: 74 },
                { metric: 'Regular Feedback', value: 69 }
            ];

            createHorizontalBarChart(data, '#career-chart', 400);
        }

        // Rewards Chart
        function createRewardsChart() {
            const data = [
                { metric: 'Recognition for Performance', value: 77 },
                { metric: 'Feeling Valued', value: 71 },
                { metric: 'Fair Compensation', value: 48 }
            ];

            createHorizontalBarChart(data, '#rewards-chart', 400);
        }

        // Generic Horizontal Bar Chart
        function createHorizontalBarChart(data, selector, chartHeight) {
            const width = 700;
            const height = chartHeight;
            const margin = { top: 20, right: 60, bottom: 40, left: 200 };

            const svg = d3.select(selector)
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const chartWidth = width - margin.left - margin.right;
            const innerHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleLinear()
                .domain([0, 100])
                .range([0, chartWidth]);

            const y = d3.scaleBand()
                .domain(data.map(d => d.metric))
                .range([0, innerHeight])
                .padding(0.25);

            const colorScale = d3.scaleLinear()
                .domain([0, 50, 100])
                .range([colors.danger, colors.warning, colors.positive]);

            g.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', 0)
                .attr('y', d => y(d.metric))
                .attr('width', d => x(d.value))
                .attr('height', y.bandwidth())
                .attr('fill', d => colorScale(d.value))
                .attr('rx', 5)
                .on('mouseover', function(event, d) {
                    tooltip.style('opacity', 1)
                        .html(`<strong>${d.metric}</strong><br/>${d.value}%`);
                })
                .on('mousemove', function(event) {
                    tooltip.style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });

            // Add value labels
            g.selectAll('.label')
                .data(data)
                .enter()
                .append('text')
                .attr('x', d => x(d.value) + 10)
                .attr('y', d => y(d.metric) + y.bandwidth() / 2)
                .attr('dy', '0.35em')
                .attr('font-size', '14px')
                .attr('font-weight', 'bold')
                .attr('fill', colors.dark)
                .text(d => d.value + '%');

            // Y axis
            g.append('g')
                .call(d3.axisLeft(y))
                .selectAll('text')
                .attr('font-size', '11px');

            // X axis
            g.append('g')
                .attr('transform', `translate(0,${innerHeight})`)
                .call(d3.axisBottom(x).tickFormat(d => d + '%'))
                .selectAll('text')
                .attr('font-size', '11px');
        }

        // Comparison Chart
        function createComparisonChart() {
            const strengths = [
                { item: 'Team Belonging', value: 93 },
                { item: 'Remote Collaboration', value: 88 },
                { item: 'Belonging & Inclusion', value: 87 },
                { item: 'Impactful Work', value: 87 }
            ];

            const challenges = [
                { item: 'Fair Compensation', value: 48 },
                { item: 'Informed About Company', value: 63 },
                { item: 'Clarity of Vision', value: 64 },
                { item: 'Trust in Leadership', value: 65 }
            ];

            const width = 900;
            const height = 500;
            const margin = { top: 20, right: 50, bottom: 100, left: 200 };

            const svg = d3.select('#comparison-chart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('preserveAspectRatio', 'xMidYMid meet');

            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Combine data
            const allData = [
                ...strengths.map(d => ({ ...d, category: 'Strength' })),
                ...challenges.map(d => ({ ...d, category: 'Challenge' }))
            ];

            const x = d3.scaleLinear()
                .domain([0, 100])
                .range([0, chartWidth]);

            const y = d3.scaleBand()
                .domain(allData.map(d => d.item))
                .range([0, chartHeight])
                .padding(0.2);

            const colorMap = {
                'Strength': colors.positive,
                'Challenge': colors.danger
            };

            g.selectAll('.bar')
                .data(allData)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', 0)
                .attr('y', d => y(d.item))
                .attr('width', d => x(d.value))
                .attr('height', y.bandwidth())
                .attr('fill', d => colorMap[d.category])
                .attr('rx', 5)
                .on('mouseover', function(event, d) {
                    tooltip.style('opacity', 1)
                        .html(`<strong>${d.item}</strong><br/>${d.category}: ${d.value}%`);
                })
                .on('mousemove', function(event) {
                    tooltip.style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });

            // Add value labels
            g.selectAll('.label')
                .data(allData)
                .enter()
                .append('text')
                .attr('x', d => x(d.value) + 10)
                .attr('y', d => y(d.item) + y.bandwidth() / 2)
                .attr('dy', '0.35em')
                .attr('font-size', '13px')
                .attr('font-weight', 'bold')
                .attr('fill', colors.dark)
                .text(d => d.value + '%');

            // Y axis
            g.append('g')
                .call(d3.axisLeft(y))
                .selectAll('text')
                .attr('font-size', '11px')
                .attr('fill', d => {
                    const item = allData.find(item => item.item === d);
                    return item ? colorMap[item.category] : colors.dark;
                })
                .attr('font-weight', 'bold');

            // X axis
            g.append('g')
                .attr('transform', `translate(0,${chartHeight})`)
                .call(d3.axisBottom(x).tickFormat(d => d + '%'))
                .selectAll('text')
                .attr('font-size', '11px');

            // Legend
            const legend = svg.append('g')
                .attr('transform', `translate(${margin.left}, ${height - 30})`);

            const legendData = [
                { label: 'Top Strengths', color: colors.positive },
                { label: 'Key Challenges', color: colors.danger }
            ];

            const legendItems = legend.selectAll('.legend-item')
                .data(legendData)
                .enter()
                .append('g')
                .attr('transform', (d, i) => `translate(${i * 150}, 0)`);

            legendItems.append('rect')
                .attr('width', 15)
                .attr('height', 15)
                .attr('fill', d => d.color)
                .attr('rx', 3);

            legendItems.append('text')
                .attr('x', 20)
                .attr('y', 12)
                .attr('font-size', '12px')
                .text(d => d.label);
        }

        // Initialize all charts
        createENPSChart();
        createEngagementChart();
        createPillarChart();
        createLeadershipChart();
        createBelongingChart();
        createCareerChart();
        createRewardsChart();
        createComparisonChart();
    </script>
</body>
</html>